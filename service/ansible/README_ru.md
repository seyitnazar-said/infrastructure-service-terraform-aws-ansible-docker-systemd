## –û –ø—Ä–æ–µ–∫—Ç–µ
–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ Docker-—Å–µ—Ä–≤–∏—Å–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ansible, –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É —Ä–æ–ª–∏ Ansible, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫—É systemd-—Å–µ—Ä–≤–∏—Å–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

# Ansible Role: docker-service

## üì¶ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ —Ä–æ–ª—å

–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–±–æ—Ä–∫—É Docker-–æ–±—Ä–∞–∑–∞ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ 
—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ `systemd`-—é–Ω–∏—Ç. 
–û–Ω–∞ –∫–æ–ø–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã, —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑, –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º —á–µ—Ä–µ–∑ `systemd`.

<br>

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–∞ —Ä–æ–ª—å

1. –°–æ–∑–¥–∞—ë—Ç —Ü–µ–ª–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–π –º–∞—à–∏–Ω–µ.
2. –ö–æ–ø–∏—Ä—É–µ—Ç –≤ –Ω–µ—ë:
- `Dockerfile`
- `docker-compose.yml`
- –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`go.mod`, `go.sum`, `cmd/` –∏ —Ç.–¥.).
3. –°–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑.
4. –°–æ–∑–¥–∞—ë—Ç `systemd` unit-—Ñ–∞–π–ª –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
5. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞.

<br>

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–æ–ª–∏:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è       | –û–ø–∏—Å–∞–Ω–∏–µ                                             | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è        |
|------------------|------------------------------------------------------|------------------------|
| `image_name`     | –ù–∞–∑–≤–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–∞                               | `myapp`                |
| `image_version`  | –¢–µ–≥ –≤–µ—Ä—Å–∏–∏ –æ–±—Ä–∞–∑–∞                                    | `latest`               |
| `container_name` | –ò–º—è –∑–∞–ø—É—Å–∫–∞–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞                          | `myapp-container`      |
| `port`           | –ü–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞—Ä—É–∂—É   | `8080`                 |

<br>

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ —Ä–æ–ª—å –≤ –≤–∞—à `playbook.yml` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π playbook:

```yaml
- name: Main playbook
  hosts: instance
  gather_facts: yes
  any_errors_fatal: true
  become: true
  become_user: root

  roles:
    - docker-service